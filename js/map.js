// Initialise map
var mainmap = L.map('mapcont').setView([4.2, 108.00], 6);

// Load basemap
var streetmap = L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
    maxZoom: 18,
    attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, ' +
        '<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
        'Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
    id: 'mapbox/streets-v11',
    tileSize: 512,
    zoomOffset: -1
}).addTo(mainmap);

// Load GeoJSON file
<<<<<<< HEAD
var points = new L.GeoJSON.AJAX("./json/myhg_master.geojson")
=======
var Alliance_Polygons_Studied = new L.GeoJSON.AJAX("./json/myhg_master.geojson").addTo(mainmap)
>>>>>>> parent of 90f61e6... data now shows up as popups



function clickFunction(feature, latlng) {
    feature.on("click", function (event) {

        var properties = event.layer.feature.properties

        var text_string = "<h2>" + properties.Name_EN + "</h2><h3>" + properties.Name_CH + "</h3><h3>" + properties.Name_ML + "</h3>" + "<p><b>Location: </b>" + properties.Location + "</p><p><b>State: </b>" + properties.Region + "</p>"

        console.log(event.layer.feature.properties)
        var popup = L.popup({
                maxHeight: 500,
                maxWidth: 600,
                closeOnClick: false,
                keepInView: true
            })
            .setLatLng(event.latlng)
            .setContent(text_string)
            .openOn(mainmap);
    })
}

// Load Layers
var baseMaps = [
]

var villages_new = new L.GeoJSON.AJAX("./json/Villages_new.geojson")
var towns_new = new L.GeoJSON.AJAX("./json/TownsNEW.geojson")
var temples_new = new L.GeoJSON.AJAX("./json/Temples_new.geojson")

var TRG_csfl = new L.GeoJSON.AJAX("./json/Terengganu/cishanfuli.geojson", {
    pointToLayer: function (feature, latlng) {
        console.log(feature)

        feature.on("click", function (event) {

            var properties = event.layer.feature.properties

            var text_string = "<h2>" + properties.Name_EN + "</h2><h3>" + properties.Name_CH + "</h3><h3>" + properties.Name_ML + "</h3>" + "<p><b>Location: </b>" + properties.Location + "</p><p><b>State: </b>" + properties.Region + "</p>"

            console.log(event.layer.feature.properties)
            var popup = L.popup({
                    maxHeight: 500,
                    maxWidth: 600,
                    closeOnClick: false,
                    keepInView: true
                })
                .setLatLng(event.latlng)
                .setContent(text_string)
                .openOn(mainmap);
        })

    }
}).addTo(mainmap)
var TRG_dy = new L.GeoJSON.AJAX("./json/Terengganu/diyuan.geojson").addTo(mainmap)
var TRG_tyly = new L.GeoJSON.AJAX("./json/Terengganu/tiyulianyi.geojson").addTo(mainmap)
var TRG_wj = new L.GeoJSON.AJAX("./json/Terengganu/wenjiao.geojson").addTo(mainmap)
var TRG_xy = new L.GeoJSON.AJAX("./json/Terengganu/xueyuan.geojson").addTo(mainmap)
var TRG_yy = new L.GeoJSON.AJAX("./json/Terengganu/yeyuan.geojson").addTo(mainmap)
var TRG_zh = new L.GeoJSON.AJAX("./json/Terengganu/zonghe.geojson").addTo(mainmap)
var TRG_zj = new L.GeoJSON.AJAX("./json/Terengganu/zongjiao.geojson").addTo(mainmap)

var SGR_csfl = new L.GeoJSON.AJAX("./json/Selangor/cishanfuli.geojson").addTo(mainmap)
var SGR_dy = new L.GeoJSON.AJAX("./json/Selangor/diyuan.geojson").addTo(mainmap)
var SGR_tyly = new L.GeoJSON.AJAX("./json/Selangor/tiyulianyi.geojson").addTo(mainmap)
var SGR_wj = new L.GeoJSON.AJAX("./json/Selangor/wenjiao.geojson").addTo(mainmap)
var SGR_xy = new L.GeoJSON.AJAX("./json/Selangor/xueyuan.geojson").addTo(mainmap)
var SGR_yy = new L.GeoJSON.AJAX("./json/Selangor/yeyuan.geojson").addTo(mainmap)
var SGR_zh = new L.GeoJSON.AJAX("./json/Selangor/zonghe.geojson").addTo(mainmap)
var SGR_zj = new L.GeoJSON.AJAX("./json/Selangor/zongjiao.geojson").addTo(mainmap)

var SWK_csfl = new L.GeoJSON.AJAX("./json/Sarawak/cishanfuli.geojson").addTo(mainmap)
var SWK_dy = new L.GeoJSON.AJAX("./json/Sarawak/diyuan.geojson").addTo(mainmap)
var SWK_dlzx = new L.GeoJSON.AJAX("./json/Sarawak/dulizhongxue.geojson").addTo(mainmap)
var SWK_qnfn = new L.GeoJSON.AJAX("./json/Sarawak/qingnianfunu.geojson").addTo(mainmap)
var SWK_tyly = new L.GeoJSON.AJAX("./json/Sarawak/tiyulianyi.geojson").addTo(mainmap)
var SWK_wj = new L.GeoJSON.AJAX("./json/Sarawak/wenjiao.geojson").addTo(mainmap)
var SWK_xy = new L.GeoJSON.AJAX("./json/Sarawak/xueyuan.geojson").addTo(mainmap)
var SWK_yy = new L.GeoJSON.AJAX("./json/Sarawak/yeyuan.geojson").addTo(mainmap)
var SWK_zh = new L.GeoJSON.AJAX("./json/Sarawak/zonghe.geojson").addTo(mainmap)
var SWK_zj = new L.GeoJSON.AJAX("./json/Sarawak/zongjiao.geojson").addTo(mainmap)

var SBH_csfl = new L.GeoJSON.AJAX("./json/Sabah/cishanfuli.geojson").addTo(mainmap)
var SBH_dy = new L.GeoJSON.AJAX("./json/Sabah/diyuan.geojson").addTo(mainmap)
var SBH_dlzx = new L.GeoJSON.AJAX("./json/Sabah/dulizhongxue.geojson").addTo(mainmap)
var SBH_qnfn = new L.GeoJSON.AJAX("./json/Sabah/qingniaofunu.geojson").addTo(mainmap)
var SBH_tyly = new L.GeoJSON.AJAX("./json/Sabah/tiyulianyi.geojson").addTo(mainmap)
var SBH_wj = new L.GeoJSON.AJAX("./json/Sabah/wenjiao.geojson").addTo(mainmap)
var SBH_xy = new L.GeoJSON.AJAX("./json/Sabah/xueyuan.geojson").addTo(mainmap)
var SBH_yy = new L.GeoJSON.AJAX("./json/Sabah/yeyuan.geojson").addTo(mainmap)
var SBH_zh = new L.GeoJSON.AJAX("./json/Sabah/zonghe.geojson").addTo(mainmap)
var SBH_zj = new L.GeoJSON.AJAX("./json/Sabah/zongjiao.geojson").addTo(mainmap)

var PLS_csfl = new L.GeoJSON.AJAX("./json/Perlis/cishanfuli.geojson").addTo(mainmap)
var PLS_dy = new L.GeoJSON.AJAX("./json/Perlis/diyuan.geojson").addTo(mainmap)
var PLS_qnfn = new L.GeoJSON.AJAX("./json/Perlis/qingniaofunu.geojson").addTo(mainmap)
var PLS_tyly = new L.GeoJSON.AJAX("./json/Perlis/tiyulianyi.geojson").addTo(mainmap)
var PLS_wj = new L.GeoJSON.AJAX("./json/Perlis/wenjiao.geojson").addTo(mainmap)
var PLS_xy = new L.GeoJSON.AJAX("./json/Perlis/xueyuan.geojson").addTo(mainmap)
var PLS_yy = new L.GeoJSON.AJAX("./json/Perlis/yeyuan.geojson").addTo(mainmap)
var PLS_zh = new L.GeoJSON.AJAX("./json/Perlis/zonghe.geojson").addTo(mainmap)
var PLS_zj = new L.GeoJSON.AJAX("./json/Perlis/zongjiao.geojson").addTo(mainmap)

var PRK_csfl = new L.GeoJSON.AJAX("./json/Perak/cishanfuli.geojson").addTo(mainmap)
var PRK_dy = new L.GeoJSON.AJAX("./json/Perak/diyuan.geojson").addTo(mainmap)
var PRK_dlzx = new L.GeoJSON.AJAX("./json/Perak/dulizhongxue.geojson").addTo(mainmap)
var PRK_qnfn = new L.GeoJSON.AJAX("./json/Perak/qingniaofunu.geojson").addTo(mainmap)
var PRK_tyly = new L.GeoJSON.AJAX("./json/Perak/tiyulianyi.geojson").addTo(mainmap)
var PRK_wj = new L.GeoJSON.AJAX("./json/Perak/wenjiao.geojson").addTo(mainmap)
var PRK_xy = new L.GeoJSON.AJAX("./json/Perak/xueyuan.geojson").addTo(mainmap)
var PRK_yy = new L.GeoJSON.AJAX("./json/Perak/yeyuan.geojson").addTo(mainmap)
var PRK_zh = new L.GeoJSON.AJAX("./json/Perak/zonghe.geojson").addTo(mainmap)
var PRK_zj = new L.GeoJSON.AJAX("./json/Perak/zongjiao.geojson").addTo(mainmap)

var PNG_csfl = new L.GeoJSON.AJAX("./json/Penang/cishanfuli.geojson").addTo(mainmap)
var PNG_dy = new L.GeoJSON.AJAX("./json/Penang/diyuan.geojson").addTo(mainmap)
var PNG_dlzx = new L.GeoJSON.AJAX("./json/Penang/dulizhongxue.geojson").addTo(mainmap)
var PNG_qnfn = new L.GeoJSON.AJAX("./json/Penang/qingniaofunu.geojson").addTo(mainmap)
var PNG_tyly = new L.GeoJSON.AJAX("./json/Penang/tiyulianyi.geojson").addTo(mainmap)
var PNG_wj = new L.GeoJSON.AJAX("./json/Penang/wenjiao.geojson").addTo(mainmap)
var PNG_xy = new L.GeoJSON.AJAX("./json/Penang/xueyuan.geojson").addTo(mainmap)
var PNG_yy = new L.GeoJSON.AJAX("./json/Penang/yeyuan.geojson").addTo(mainmap)
var PNG_zh = new L.GeoJSON.AJAX("./json/Penang/zonghe.geojson").addTo(mainmap)
var PNG_zj = new L.GeoJSON.AJAX("./json/Penang/zongjiao.geojson").addTo(mainmap)

var PHG_csfl = new L.GeoJSON.AJAX("./json/Pahang/cishanfuli.geojson").addTo(mainmap)
var PHG_dy = new L.GeoJSON.AJAX("./json/Pahang/diyuan.geojson").addTo(mainmap)
var PHG_qnfn = new L.GeoJSON.AJAX("./json/Pahang/qingniaofunu.geojson").addTo(mainmap)
var PHG_tyly = new L.GeoJSON.AJAX("./json/Pahang/tiyulianyi.geojson").addTo(mainmap)
var PHG_wj = new L.GeoJSON.AJAX("./json/Pahang/wenjiao.geojson").addTo(mainmap)
var PHG_xy = new L.GeoJSON.AJAX("./json/Pahang/xueyuan.geojson").addTo(mainmap)
var PHG_yy = new L.GeoJSON.AJAX("./json/Pahang/yeyuan.geojson").addTo(mainmap)
var PHG_zh = new L.GeoJSON.AJAX("./json/Pahang/zonghe.geojson").addTo(mainmap)
var PHG_zj = new L.GeoJSON.AJAX("./json/Pahang/zongjiao.geojson").addTo(mainmap)

var NSN_csfl = new L.GeoJSON.AJAX("./json/Negeri Sembilan/cishanfuli.geojson").addTo(mainmap)
var NSN_dy = new L.GeoJSON.AJAX("./json/Negeri Sembilan/diyuan.geojson").addTo(mainmap)
var NSN_dlzx = new L.GeoJSON.AJAX("./json/Negeri Sembilan/dulizhongxue.geojson").addTo(mainmap)
var NSN_qnfn = new L.GeoJSON.AJAX("./json/Negeri Sembilan/qingniaofunu.geojson").addTo(mainmap)
var NSN_tyly = new L.GeoJSON.AJAX("./json/Negeri Sembilan/tiyulianyi.geojson").addTo(mainmap)
var NSN_wj = new L.GeoJSON.AJAX("./json/Negeri Sembilan/wenjiao.geojson").addTo(mainmap)
var NSN_xy = new L.GeoJSON.AJAX("./json/Negeri Sembilan/xueyuan.geojson").addTo(mainmap)
var NSN_yy = new L.GeoJSON.AJAX("./json/Negeri Sembilan/yeyuan.geojson").addTo(mainmap)
var NSN_zh = new L.GeoJSON.AJAX("./json/Negeri Sembilan/zonghe.geojson").addTo(mainmap)
var NSN_zj = new L.GeoJSON.AJAX("./json/Negeri Sembilan/zongjiao.geojson").addTo(mainmap)

var MLK_dlzx = new L.GeoJSON.AJAX("./json/Melaka/dulizhongxue.geojson").addTo(mainmap)

var KUL_dlzx = new L.GeoJSON.AJAX("./json/Kuala Lumpur/dulizhongxue.geojson").addTo(mainmap)

var KTN_csfl = new L.GeoJSON.AJAX("./json/Kelantan/cishanfuli.geojson").addTo(mainmap)
var KTN_dy = new L.GeoJSON.AJAX("./json/Kelantan/diyuan.geojson").addTo(mainmap)
var KTN_dlzx = new L.GeoJSON.AJAX("./json/Kelantan/dulizhongxue.geojson").addTo(mainmap)
var KTN_tyly = new L.GeoJSON.AJAX("./json/Kelantan/tiyulianyi.geojson").addTo(mainmap)
var KTN_wj = new L.GeoJSON.AJAX("./json/Kelantan/wenjiao.geojson").addTo(mainmap)
var KTN_xy = new L.GeoJSON.AJAX("./json/Kelantan/xueyuan.geojson").addTo(mainmap)
var KTN_yy = new L.GeoJSON.AJAX("./json/Kelantan/yeyuan.geojson").addTo(mainmap)
var KTN_zh = new L.GeoJSON.AJAX("./json/Kelantan/zonghe.geojson").addTo(mainmap)
var KTN_zj = new L.GeoJSON.AJAX("./json/Kelantan/zongjiao.geojson").addTo(mainmap)

var KDH_csfl = new L.GeoJSON.AJAX("./json/Kedah/cishanfuli.geojson").addTo(mainmap)
var KDH_dy = new L.GeoJSON.AJAX("./json/Kedah/diyuan.geojson").addTo(mainmap)
var KDH_dlzx = new L.GeoJSON.AJAX("./json/Kedah/dulizhongxue.geojson").addTo(mainmap)
var KDH_qnfn = new L.GeoJSON.AJAX("./json/Kedah/qingniaofunu.geojson").addTo(mainmap)
var KDH_tyly = new L.GeoJSON.AJAX("./json/Kedah/tiyulianyi.geojson").addTo(mainmap)
var KDH_wj = new L.GeoJSON.AJAX("./json/Kedah/wenjiao.geojson").addTo(mainmap)
var KDH_xy = new L.GeoJSON.AJAX("./json/Kedah/xueyuan.geojson").addTo(mainmap)
var KDH_yy = new L.GeoJSON.AJAX("./json/Kedah/yeyuan.geojson").addTo(mainmap)
var KDH_zh = new L.GeoJSON.AJAX("./json/Kedah/zonghe.geojson").addTo(mainmap)
var KDH_zj = new L.GeoJSON.AJAX("./json/Kedah/zongjiao.geojson").addTo(mainmap)

var JHR_csfl = new L.GeoJSON.AJAX("./json/Johor/cishanfuli.geojson").addTo(mainmap)
var JHR_dy = new L.GeoJSON.AJAX("./json/Johor/diyuan.geojson").addTo(mainmap)
var JHR_dlzx = new L.GeoJSON.AJAX("./json/Johor/dulizhongxue.geojson").addTo(mainmap)
var JHR_qnfn = new L.GeoJSON.AJAX("./json/Johor/qingniaofunu.geojson").addTo(mainmap)
var JHR_tyly = new L.GeoJSON.AJAX("./json/Johor/tiyulianyi.geojson").addTo(mainmap)
var JHR_wj = new L.GeoJSON.AJAX("./json/Johor/wenjiao.geojson").addTo(mainmap)
var JHR_xy = new L.GeoJSON.AJAX("./json/Johor/xueyuan.geojson").addTo(mainmap)
var JHR_yy = new L.GeoJSON.AJAX("./json/Johor/yeyuan.geojson").addTo(mainmap)
var JHR_zh = new L.GeoJSON.AJAX("./json/Johor/zonghe.geojson").addTo(mainmap)
var JHR_zj = new L.GeoJSON.AJAX("./json/Johor/zongjiao.geojson").addTo(mainmap)


var overlays = [
    {
        groupName: "Terengganu",
        expanded: true,
        layers: {
            "æåç¦å©": TRG_csfl,
            "å°ç¼": TRG_dy,
            "ä½è²èè°": TRG_tyly,
            "ææ": TRG_wj,
            "è¡ç¼": TRG_xy,
            "ä¸ç¼": TRG_yy,
            "ç»¼å": TRG_zh,
            "å®æ": TRG_zj
        }
    },
    {
        groupName: "Selangor",
        expanded: false,
        layers: {
            "æåç¦å©": SGR_csfl,
            "å°ç¼": SGR_dy,
            "ä½è²èè°": SGR_tyly,
            "ææ": SGR_wj,
            "è¡ç¼": SGR_xy,
            "ä¸ç¼": SGR_yy,
            "ç»¼å": SGR_zh,
            "å®æ": SGR_zj
        }
    },
    {
        groupName: "Sarawak",
        expanded: false,
        layers: {
            "æåç¦å©": SWK_csfl,
            "å°ç¼": SWK_dy,
            "ç¬ç«ä¸­å­¦": SWK_dlzx,
            "éå¹´å¦å¥³": SWK_qnfn,
            "ä½è²èè°": SWK_tyly,
            "ææ": SWK_wj,
            "è¡ç¼": SWK_xy,
            "ä¸ç¼": SWK_yy,
            "ç»¼å": SWK_zh,
            "å®æ": SWK_zj
        }
    },
    {
        groupName: "Sabah",
        expanded: false,
        layers: {
            "æåç¦å©": SBH_csfl,
            "å°ç¼": SBH_dy,
            "ç¬ç«ä¸­å­¦": SBH_dlzx,
            "éå¹´å¦å¥³": SBH_qnfn,
            "ä½è²èè°": SBH_tyly,
            "ææ": SBH_wj,
            "è¡ç¼": SBH_xy,
            "ä¸ç¼": SBH_yy,
            "ç»¼å": SBH_zh,
            "å®æ": SBH_zj
        }
    },
    {
        groupName: "Perlis",
        expanded: false,
        layers: {
            "æåç¦å©": PLS_csfl,
            "å°ç¼": PLS_dy,
            "éå¹´å¦å¥³": PLS_qnfn,
            "ä½è²èè°": PLS_tyly,
            "ææ": PLS_wj,
            "è¡ç¼": PLS_xy,
            "ä¸ç¼": PLS_yy,
            "ç»¼å": PLS_zh,
            "å®æ": PLS_zj
        }
    },
    {
        groupName: "Perak",
        expanded: false,
        layers: {
            "æåç¦å©": PRK_csfl,
            "å°ç¼": PRK_dy,
            "ç¬ç«ä¸­å­¦": PRK_dlzx,
            "éå¹´å¦å¥³": PRK_qnfn,
            "ä½è²èè°": PRK_tyly,
            "ææ": PRK_wj,
            "è¡ç¼": PRK_xy,
            "ä¸ç¼": PRK_yy,
            "ç»¼å": PRK_zh,
            "å®æ": PRK_zj
        }
    },
    {
        groupName: "Penang",
        expanded: false,
        layers: {
            "æåç¦å©": PNG_csfl,
            "å°ç¼": PNG_dy,
            "ç¬ç«ä¸­å­¦": PNG_dlzx,
            "éå¹´å¦å¥³": PNG_qnfn,
            "ä½è²èè°": PNG_tyly,
            "ææ": PNG_wj,
            "è¡ç¼": PNG_xy,
            "ä¸ç¼": PNG_yy,
            "ç»¼å": PNG_zh,
            "å®æ": PNG_zj
        }
    },
    {
        groupName: "Pahang",
        expanded: false,
        layers: {
            "æåç¦å©": PHG_csfl,
            "å°ç¼": PHG_dy,
            "éå¹´å¦å¥³": PHG_qnfn,
            "ä½è²èè°": PHG_tyly,
            "ææ": PHG_wj,
            "è¡ç¼": PHG_xy,
            "ä¸ç¼": PHG_yy,
            "ç»¼å": PHG_zh,
            "å®æ": PHG_zj
        }
    },
    {
        groupName: "Negeri Sembilan",
        expanded: false,
        layers: {
            "æåç¦å©": NSN_csfl,
            "å°ç¼": NSN_dy,
            "ç¬ç«ä¸­å­¦": NSN_dlzx,
            "éå¹´å¦å¥³": NSN_qnfn,
            "ä½è²èè°": NSN_tyly,
            "ææ": NSN_wj,
            "è¡ç¼": NSN_xy,
            "ä¸ç¼": NSN_yy,
            "ç»¼å": NSN_zh,
            "å®æ": NSN_zj
        }
    },
    {
        groupName: "Melaka",
        expanded: false,
        layers: {
            "ç¬ç«ä¸­å­¦": MLK_dlzx
        }
    },
    {
        groupName: "Kuala Lumpur",
        expanded: false,
        layers: {
            "ç¬ç«ä¸­å­¦": KUL_dlzx
        }
    },
    {
        groupName: "Kelantan",
        expanded: false,
        layers: {
            "æåç¦å©": KTN_csfl,
            "å°ç¼": KTN_dy,
            "ç¬ç«ä¸­å­¦": KTN_dlzx,
            "ä½è²èè°": KTN_tyly,
            "ææ": KTN_wj,
            "è¡ç¼": KTN_xy,
            "ä¸ç¼": KTN_yy,
            "ç»¼å": KTN_zh,
            "å®æ": KTN_zj
        }
    },
    {
        groupName: "Kedah",
        expanded: false,
        layers: {
            "æåç¦å©": KDH_csfl,
            "å°ç¼": KDH_dy,
            "ç¬ç«ä¸­å­¦": KDH_dlzx,
            "ä½è²èè°": KDH_tyly,
            "ææ": KDH_wj,
            "è¡ç¼": KDH_xy,
            "ä¸ç¼": KDH_yy,
            "ç»¼å": KDH_zh,
            "å®æ": KDH_zj
        }
    },
    {
        groupName: "Johor",
        expanded: false,
        layers: {
            "æåç¦å©": JHR_csfl,
            "å°ç¼": JHR_dy,
            "ç¬ç«ä¸­å­¦": JHR_dlzx,
            "éå¹´å¦å¥³": JHR_qnfn,
            "ä½è²èè°": JHR_tyly,
            "ææ": JHR_wj,
            "è¡ç¼": JHR_xy,
            "ä¸ç¼": JHR_yy,
            "ç»¼å": JHR_zh,
            "å®æ": JHR_zj
        }
    },
    {
        groupName: "Misc",
        expanded: true,
        layers: {
            "Villages_new": villages_new,
            "towns_new": towns_new,
            "temples_new": temples_new
        }
    }
]

var options = {
    container_width: "300px",
    container_maxHeight: "700px",
    group_maxHeight: "250px",
    groupCheckboxes: true
};


var control = L.Control.styledLayerControl(baseMaps, overlays, options);
mainmap.addControl(control);

$(document).ready(function () {
    mainmap.invalidateSize()

})
